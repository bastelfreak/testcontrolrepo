# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`profiles::boltprojects`](#profiles--boltprojects): demo profile to configure bolt for peadm convert
* [`profiles::cleanup`](#profiles--cleanup): prepares a PE environment for a peadm::convert && peadm::upgrade
* [`profiles::cleanup::pe_conf`](#profiles--cleanup--pe_conf): removess bad data from pe.conf and ensures that the environment is correct

#### Private Classes

* `profiles::cleanup::agent`: ensures that the puppet agents have the correct config to update themself
* `profiles::cleanup::node_group`: removes data from the PE Master node group if required
* `profiles::cleanup::puppetconf`
* `profiles::cleanup::user_data`: removes bad data from user_data.conf

### Functions

#### Public Functions

* [`profiles::boltdir`](#profiles--boltdir): Return absolute path to bolt project directory
* [`profiles::delete`](#profiles--delete): return absolute path to bolt project directory
* [`profiles::readhocon`](#profiles--readhocon): return Hocon data
* [`profiles::validate_code_manager_sources`](#profiles--validate_code_manager_sources): ensures that we've the correct hiera data of control-repositories
* [`profiles::validate_control_repo_sources_in_hiera`](#profiles--validate_control_repo_sources_in_hiera): ensures that we've the correct hiera data of control-repositories

#### Private Functions

* `profiles::validate_env_bolt`
* `profiles::validate_env_puppet`: collect information about a configured vs used environment

### Plans

#### Public Plans

* [`profiles::convert`](#profiles--convert): calls peadm::convert + sanity checks. supposed to be executed via systemd unit
* [`profiles::convertandupgradeto2021`](#profiles--convertandupgradeto2021): calls peadm::convert & peadm::upgrade + sanity checks. supposed to be executed via systemd unit
* [`profiles::convertandupgradeto2023`](#profiles--convertandupgradeto2023): calls peadm::convert & peadm::upgrade + sanity checks. supposed to be executed via systemd unit
* [`profiles::test`](#profiles--test)
* [`profiles::test2`](#profiles--test2)
* [`profiles::upgrade`](#profiles--upgrade): calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit
* [`profiles::upgradeto2021`](#profiles--upgradeto2021): calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit
* [`profiles::upgradeto2023`](#profiles--upgradeto2023): calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit
* [`profiles::upgradeto2023url`](#profiles--upgradeto2023url): calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Private Plans

* `profiles::subplans::precheck`: validates if an environment is healthy so we can do modifications or upgrades
* `profiles::subplans::precheck::environment`: ensures that the used environment is configured properly everywhere
* `profiles::subplans::precheck::health`: ensures that the used environment is configured properly everywhere

## Classes

### <a name="profiles--boltprojects"></a>`profiles::boltprojects`

demo profile to configure bolt for peadm convert

#### Parameters

The following parameters are available in the `profiles::boltprojects` class:

* [`version`](#-profiles--boltprojects--version)
* [`version_2021`](#-profiles--boltprojects--version_2021)
* [`version_2023`](#-profiles--boltprojects--version_2023)

##### <a name="-profiles--boltprojects--version"></a>`version`

Data type: `Peadm::Pe_version`

our default version to upgrade to

Default value: `'2021.7.8'`

##### <a name="-profiles--boltprojects--version_2021"></a>`version_2021`

Data type: `Peadm::Pe_version`

latest PE 2021 version

Default value: `$version`

##### <a name="-profiles--boltprojects--version_2023"></a>`version_2023`

Data type: `Peadm::Pe_version`

latest PE 2023 version

Default value: `'2023.7.0'`

### <a name="profiles--cleanup"></a>`profiles::cleanup`

prepares a PE environment for a peadm::convert && peadm::upgrade

#### Parameters

The following parameters are available in the `profiles::cleanup` class:

* [`show_diff`](#-profiles--cleanup--show_diff)
* [`repo`](#-profiles--cleanup--repo)

##### <a name="-profiles--cleanup--show_diff"></a>`show_diff`

Data type: `Boolean`

shows the diff for file resources. Set to true for debugging

Default value: `false`

##### <a name="-profiles--cleanup--repo"></a>`repo`

Data type: `String[1]`

url to the control repository

Default value: `'https://github.com/voxpupuli/controlrepo'`

### <a name="profiles--cleanup--pe_conf"></a>`profiles::cleanup::pe_conf`

removess bad data from pe.conf and ensures that the environment is correct

#### Parameters

The following parameters are available in the `profiles::cleanup::pe_conf` class:

* [`validated_env`](#-profiles--cleanup--pe_conf--validated_env)
* [`show_diff`](#-profiles--cleanup--pe_conf--show_diff)

##### <a name="-profiles--cleanup--pe_conf--validated_env"></a>`validated_env`

Data type: `Hash`

hash with the correct environment

##### <a name="-profiles--cleanup--pe_conf--show_diff"></a>`show_diff`

Data type: `Boolean`

hide the file diff

Default value: `false`

## Functions

### <a name="profiles--boltdir"></a>`profiles::boltdir`

Type: Ruby 4.x API

Return absolute path to bolt project directory

#### Examples

##### Calling the function

```puppet
boltdir()
```

#### `profiles::boltdir()`

Return absolute path to bolt project directory

Returns: `Stdlib::Absolutepath`

##### Examples

###### Calling the function

```puppet
boltdir()
```

### <a name="profiles--delete"></a>`profiles::delete`

Type: Ruby 4.x API

return absolute path to bolt project directory

#### Examples

##### calling the function

```puppet
boltdir()
```

#### `profiles::delete(Variant[Array,Hash] $input, String[1] $key)`

return absolute path to bolt project directory

Returns: `Variant[Array,Hash]`

##### Examples

###### calling the function

```puppet
boltdir()
```

##### `input`

Data type: `Variant[Array,Hash]`



##### `key`

Data type: `String[1]`



### <a name="profiles--readhocon"></a>`profiles::readhocon`

Type: Ruby 4.x API

return Hocon data

#### Examples

##### Calling the function

```puppet
profiles::readhocon('/etc/puppetlabs/enterprise/conf.d/pe.conf')
```

#### `profiles::readhocon(Stdlib::Absolutepath $path)`

The profiles::readhocon function.

Returns: `Hash`

##### Examples

###### Calling the function

```puppet
profiles::readhocon('/etc/puppetlabs/enterprise/conf.d/pe.conf')
```

##### `path`

Data type: `Stdlib::Absolutepath`

absolute path to a hocon config file, needs to end with .conf

### <a name="profiles--validate_code_manager_sources"></a>`profiles::validate_code_manager_sources`

Type: Puppet Language

ensures that we've the correct hiera data of control-repositories

#### `profiles::validate_code_manager_sources(String[1] $repo, Hash $sources)`

The profiles::validate_code_manager_sources function.

Returns: `Any`

##### `repo`

Data type: `String[1]`

the control-repository with all bolt plans

##### `sources`

Data type: `Hash`

the sources hash from the codemanager_config fact

### <a name="profiles--validate_control_repo_sources_in_hiera"></a>`profiles::validate_control_repo_sources_in_hiera`

Type: Puppet Language

ensures that we've the correct hiera data of control-repositories

#### `profiles::validate_control_repo_sources_in_hiera(String[1] $repo)`

The profiles::validate_control_repo_sources_in_hiera function.

Returns: `Any`

##### `repo`

Data type: `String[1]`

the control-repository with all bolt plans

## Plans

### <a name="profiles--convert"></a>`profiles::convert`

calls peadm::convert + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::convert` plan:

* [`primary_host`](#-profiles--convert--primary_host)

##### <a name="-profiles--convert--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

### <a name="profiles--convertandupgradeto2021"></a>`profiles::convertandupgradeto2021`

calls peadm::convert & peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::convertandupgradeto2021` plan:

* [`primary_host`](#-profiles--convertandupgradeto2021--primary_host)
* [`version`](#-profiles--convertandupgradeto2021--version)

##### <a name="-profiles--convertandupgradeto2021--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

##### <a name="-profiles--convertandupgradeto2021--version"></a>`version`

Data type: `Peadm::Pe_version`

always points to the latest LTS

Default value: `'2021.8.0'`

### <a name="profiles--convertandupgradeto2023"></a>`profiles::convertandupgradeto2023`

calls peadm::convert & peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::convertandupgradeto2023` plan:

* [`primary_host`](#-profiles--convertandupgradeto2023--primary_host)
* [`version`](#-profiles--convertandupgradeto2023--version)

##### <a name="-profiles--convertandupgradeto2023--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

##### <a name="-profiles--convertandupgradeto2023--version"></a>`version`

Data type: `Peadm::Pe_version`

always points to the latest LTS

Default value: `'2023.8.0'`

### <a name="profiles--test"></a>`profiles::test`

The profiles::test class.

### <a name="profiles--test2"></a>`profiles::test2`

The profiles::test2 class.

### <a name="profiles--upgrade"></a>`profiles::upgrade`

calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::upgrade` plan:

* [`primary_host`](#-profiles--upgrade--primary_host)
* [`version`](#-profiles--upgrade--version)
* [`pe_installer_source`](#-profiles--upgrade--pe_installer_source)

##### <a name="-profiles--upgrade--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary

##### <a name="-profiles--upgrade--version"></a>`version`

Data type: `Peadm::Pe_version`

always points to the latest LTS

Default value: `'2021.7.8'`

##### <a name="-profiles--upgrade--pe_installer_source"></a>`pe_installer_source`

Data type: `Optional[Stdlib::HTTPSUrl]`

optional URL to the PE builds, can point to a webdir or absolute URL

Default value: `undef`

### <a name="profiles--upgradeto2021"></a>`profiles::upgradeto2021`

calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::upgradeto2021` plan:

* [`primary_host`](#-profiles--upgradeto2021--primary_host)
* [`version`](#-profiles--upgradeto2021--version)
* [`pe_installer_source`](#-profiles--upgradeto2021--pe_installer_source)

##### <a name="-profiles--upgradeto2021--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

##### <a name="-profiles--upgradeto2021--version"></a>`version`

Data type: `Peadm::Pe_version`

always points to the latest LTS

Default value: `'2021.7.8'`

##### <a name="-profiles--upgradeto2021--pe_installer_source"></a>`pe_installer_source`

Data type: `Optional[Stdlib::HTTPSUrl]`

optional URL to the PE builds, can point to a webdir or absolute URL

Default value: `undef`

### <a name="profiles--upgradeto2023"></a>`profiles::upgradeto2023`

calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::upgradeto2023` plan:

* [`primary_host`](#-profiles--upgradeto2023--primary_host)
* [`version`](#-profiles--upgradeto2023--version)
* [`pe_installer_source`](#-profiles--upgradeto2023--pe_installer_source)

##### <a name="-profiles--upgradeto2023--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

##### <a name="-profiles--upgradeto2023--version"></a>`version`

Data type: `Peadm::Pe_version`

always points to the latest LTS

Default value: `'2023.7.0'`

##### <a name="-profiles--upgradeto2023--pe_installer_source"></a>`pe_installer_source`

Data type: `Optional[Stdlib::HTTPSUrl]`

optional URL to the PE builds, can point to a webdir or absolute URL

Default value: `undef`

### <a name="profiles--upgradeto2023url"></a>`profiles::upgradeto2023url`

calls peadm::upgrade + sanity checks. supposed to be executed via systemd unit

#### Parameters

The following parameters are available in the `profiles::upgradeto2023url` plan:

* [`primary_host`](#-profiles--upgradeto2023url--primary_host)
* [`version`](#-profiles--upgradeto2023url--version)
* [`pe_installer_source`](#-profiles--upgradeto2023url--pe_installer_source)

##### <a name="-profiles--upgradeto2023url--primary_host"></a>`primary_host`

Data type: `Peadm::SingleTargetSpec`

the FQDN/common name of the primary, passed to peadm::convert

##### <a name="-profiles--upgradeto2023url--version"></a>`version`

Data type: `Peadm::Pe_version`



Default value: `'2023.7.0'`

##### <a name="-profiles--upgradeto2023url--pe_installer_source"></a>`pe_installer_source`

Data type: `Optional[Stdlib::HTTPSUrl]`



Default value: `undef`

